            return this.conn.query(
                    `
                SELECT
                    p.id AS posts_id,
                    p.title AS posts_title,
                    p.url AS posts_url,
                    p.createdAt AS posts_createdAt,
                    p.updatedAt AS posts_updatedAt, 
                    
                    u.id AS users_id,
                    u.username AS users_username,
                    u.createdAt AS users_createdAt,
                    u.updatedAt AS users_updatedAt,
                    
                    s.id AS subreddits_id,
                    s.name AS subreddits_name,
                    s.description AS subreddits_description,
                    s.createdAt AS subreddits_createdAt,
                    s.updatedAt AS subreddits_updatedAt,
                    
                    COALESCE(SUM(v.voteDirection), 0) AS voteScore,
                    SUM(IF(v.voteDirection = 1, 1, 0)) AS numUpvotes,
                    SUM(IF(v.voteDirection = -1, 1, 0)) AS numDownvotes
                    
                FROM posts p
                    JOIN users u ON p.userId = u.id
                    JOIN subreddits s ON p.subredditId = s.id
                    LEFT JOIN votes v ON p.id = v.postId
                    
                GROUP BY p.id
                ORDER BY voteDirection DESC
                LIMIT 25`
                ) //If user does not select the other 2 options, the default statement is executed
                .then(function(posts) {
                    return posts.map(transformPost);
                });
                



        //                          `GROUP BY p.id
        //                          ORDER BY p.createdAt DESC
        //                          LIMIT 25`
        
        
        v.voteDirection/NOW()-p.createdAt AS condition
        
        //'GROUP BY p.id ORDER BY voteDirection DESC'
        
         WHEN ? = 'top' THEN ${topCondition}
         
         
         
         //Custom transformation function
                     .then(result => {
                var data = result.map((post) => {
                    return {
                        id: post.postId,
                        title: post.postTitle,
                        url: post.postUrl,
                        user: {
                            id: post.userId,
                            username: post.username,
                        },
                        subreddit: {
                            name: post.subredditName,
                            id: post.subredditId,
                            description: post.subredditDescription
                        }
                    }
                })
                return data;
            });